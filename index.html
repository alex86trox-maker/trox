<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>ACHEFOOTWEAR · Personalizador Minimalista</title>

    <!-- Recursos externos optimizados -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,200,0,0" rel="stylesheet">

    <!-- Configuración Tailwind -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#000000',
                        accent: '#ec4913',
                        background: { light: '#f8f6f6', dark: '#221510' }
                    },
                    fontFamily: { display: ['Manrope', 'sans-serif'] },
                    borderRadius: { DEFAULT: '0.25rem', lg: '0.5rem', xl: '0.75rem', full: '9999px' }
                }
            }
        };
    </script>

    <!-- Estilos personalizados (compactos y sin @apply) -->
    <style>
        body { font-family: 'Manrope', sans-serif; -webkit-font-smoothing: antialiased; }
        .shoe-canvas-gradient { background: radial-gradient(circle at center, #fff 0%, #f3f4f6 100%); }
        .active-part { border-color: #000 !important; background-color: rgba(0,0,0,0.05) !important; }
        .active-part .material-symbols-outlined { color: #000 !important; }
        .color-option.active { border-width: 2px; border-color: #000; box-shadow: 0 0 0 4px rgba(0,0,0,0.1); }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
        .dark .custom-scrollbar::-webkit-scrollbar-track { background: #2d2d2d; }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb { background: #555; }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-[#1b110d] transition-colors duration-300">
    <div class="relative flex min-h-screen flex-col">

        <!-- HEADER (sin cambios funcionales, solo aria-label) -->
        <header class="sticky top-0 z-50 flex items-center justify-between border-b border-gray-100 bg-white/80 px-8 py-4 backdrop-blur-md dark:border-white/10 dark:bg-background-dark/80">
            <div class="flex items-center gap-3">
                <div class="text-black dark:text-white" aria-hidden="true">
                    <svg class="size-6" fill="currentColor" viewBox="0 0 48 48"><path d="M44 11.2727C44 14.0109 39.8386 16.3957 33.69 17.6364C39.8386 18.877 44 21.2618 44 24c0 2.7382-4.1614 5.123-10.31 6.3636C39.8386 31.6043 44 33.9891 44 36.7273 44 40.7439 35.0457 44 24 44s-20-3.2561-20-7.2727c0-2.7382 4.1614-5.123 10.31-6.3636C8.16144 29.123 4 26.7382 4 24c0-2.7382 4.16144-5.123 10.31-6.3636C8.16144 16.3957 4 14.0109 4 11.2727 4 7.25611 12.9543 4 24 4s20 3.25611 20 7.2727z"/></svg>
                </div>
                <h2 class="text-sm font-extrabold tracking-[0.2em] uppercase">ACHEFOOTWEAR</h2>
            </div>
        </header>

        <main class="flex flex-1 flex-col lg:flex-row">

            <!-- === ÁREA DEL ZAPATO (SVG) === -->
            <div class="relative flex flex-1 flex-col shoe-canvas-gradient dark:bg-background-dark/50">
                <!-- Migas de navegación decorativas -->
                <div class="absolute left-8 top-8 z-10 flex flex-wrap gap-2 text-[10px] uppercase tracking-[0.2em] font-bold">
                    <a href="#" class="text-gray-400 hover:text-black transition-colors">Colección</a>
                    <span class="text-gray-300">/</span>
                    <span class="text-black dark:text-white">Personalizador</span>
                </div>

                <!-- Contenedor del SVG + rotación -->
                <div class="flex flex-1 items-center justify-center p-12">
                    <div id="shoe-container" class="relative w-full max-w-3xl transition-transform duration-700 ease-out drop-shadow-[0_35px_35px_rgba(0,0,0,0.15)]">
                        <!-- SVG optimizado (mismo diseño, pero con grupos identificables) -->
                        <svg id="shoe-svg" viewBox="0 0 21000 29700" class="w-full h-auto" style="shape-rendering:geometricPrecision;" xmlns="http://www.w3.org/2000/svg">
                            <defs>
                                <style>
                                    .fil0 { fill: #fff; fill-rule: nonzero; }
                                    .fil1 { fill: #fff; }
                                    .fil2 { fill: none; }
                                    .fil3 { fill: none; fill-rule: nonzero; }
                                    .str0 { stroke: #2B2B2A; stroke-width: 35.28; }
                                    .str1 { stroke: #000; stroke-width: 20; }
                                    .str2 { stroke: #2B2B2A; stroke-width: 17.64; stroke-linecap: round; stroke-linejoin: round; }
                                    .str3 { stroke: #2B2B2A; stroke-width: 17.64; stroke-linecap: round; stroke-linejoin: round; stroke-dasharray: 35.27 70.54; }
                                    .str4 { stroke: #2B2B2A; stroke-width: 17.64; }
                                </style>
                            </defs>

                            <!-- SUELA (relleno fil0, trazo str0) -->
                            <g id="suela">
                                <path class="fil0 str0" d="M4091 15876c0,0 511,1017 3076,1512 1679,324 5374,-5 5374,-5 0,0 3475,344 3617,-195l0 154c-142,539 -3617,195 -3617,195 0,0 -3695,329 -5374,5 -2565,-495 -3076,-1513 -3076,-1513 0,0 -37,-70 0,-153z"/>
                                <path class="fil1 str1" d="M12286 15985c-936,37 -1769,59 -2500,67 -324,11 -644,16 -961,18 -818,8 -1534,-93 -2149,-305 -923,-333 -1534,-649 -1832,-950 -293,-296 -276,-583 51,-861 -254,34 -430,208 -529,525 -189,236 -277,708 -263,1417 267,383 627,688 1081,916 426,189 855,335 1287,439 748,169 1536,267 2365,296 741,-8 1570,-34 2487,-79 776,-97 1684,-109 2725,-38 531,16 1040,15 1526,-4 226,2 420,-78 584,-238 168,-718 227,-1123 177,-1214 73,-112 55,-246 -53,-400 7,127 -51,207 -176,240 -309,116 -587,172 -836,167 -283,17 -571,19 -866,4 -738,-33 -1443,-33 -2118,0z"/>
                                <path class="fil2 str1" d="M16335 15972c-81,104 -199,174 -353,212 -233,50 -457,84 -670,100 -116,8 -318,2 -605,-19 -137,-4 -399,-2 -786,6 -189,-5 -408,-16 -658,-32 -273,-17 -664,-17 -1175,-1 -461,15 -1023,44 -1684,87 -679,61 -1343,73 -1991,36 -700,-49 -1441,-190 -2224,-422 -936,-290 -1544,-777 -1823,-1460"/>
                                <path class="fil3 str2" d="M16334 15973c69,194 -51,303 -203,373 -142,67 -288,97 -440,121 -252,38 -457,29 -708,3 -328,-33 -487,-47 -816,-33 -312,13 -496,19 -808,13 -235,-5 -469,-12 -704,-12 -308,0 -614,9 -921,22 -542,24 -1083,64 -1624,96 -542,32 -1082,57 -1626,19 -544,-38 -1075,-132 -1607,-251 -512,-114 -1073,-267 -1550,-509 -471,-239 -952,-614 -1024,-1239"/>
                            </g>

                            <!-- HILO SUELA (decorativo) -->
                            <g id="hilo-suela">
                                <path class="fil3 str3" d="M16264 16059c1,5 1,10 1,15 0,8 0,16 -1,24 -1,4 -2,7 -2,11 -1,3 -2,7 -3,10 -3,7 -6,14 -9,20 -2,4 -5,8 -7,12 -5,7 -10,13 -16,20 -6,6 -12,13 -19,19 -7,6 -15,13 -23,19 -9,6 -18,12 -27,18 -10,6 -19,11 -29,17 -11,5 -22,11 -32,16 -11,5 -23,10 -34,14 -12,5 -23,10 -35,14 -16,6 -31,11 -47,16 -24,8 -49,15 -73,22 -25,6 -49,12 -74,18 -24,5 -48,10 -72,15 -23,4 -46,8 -69,12 -44,7 -88,13 -133,17 -41,4 -82,7 -124,9 -39,2 -78,2 -117,2 -30,-1 -60,-2 -89,-3 -37,-2 -74,-5 -111,-8 -37,-2 -73,-6 -110,-10 -45,-4 -91,-9 -137,-14 -35,-3 -71,-7 -106,-10 -34,-3 -69,-6 -104,-8 -34,-3 -68,-5 -102,-6 -33,-1 -66,-2 -99,-3 -33,0 -66,0 -98,0 -32,1 -65,1 -97,2 -32,1 -63,2 -95,4 -49,2 -99,4 -148,6 -64,3 -127,5 -191,7 -32,0 -65,1 -97,1 -33,1 -66,1 -98,1 -68,1 -135,0 -202,-1 -35,-1 -69,-1 -104,-2 -26,0 -52,-1 -79,-2 -63,-1 -127,-3 -191,-4 -79,-2 -157,-3 -236,-4 -85,-1 -171,-1 -256,-1 -94,1 -188,2 -283,4 -103,2 -206,5 -310,8 -112,4 -224,9 -337,15 -120,5 -241,11 -362,18 -63,4 -126,7 -189,11 -63,4 -127,8 -190,12 -118,7 -235,15 -352,22 -112,8 -224,15 -337,22 -50,3 -100,6 -150,9 -103,6 -206,12 -310,17 -107,5 -214,9 -322,12 -70,3 -140,4 -209,5 -57,1 -114,1 -171,1 -58,0 -117,-1 -175,-2 -61,-1 -121,-3 -182,-6 -63,-3 -127,-6 -190,-10 -68,-5 -135,-10 -203,-17 -72,-7 -145,-15 -218,-24 -80,-10 -160,-20 -240,-32 -41,-6 -81,-13 -122,-19 -43,-7 -85,-14 -128,-21 -113,-20 -226,-40 -339,-62 -52,-11 -104,-21 -156,-32 -55,-11 -111,-23 -166,-35 -58,-13 -116,-26 -174,-40 -62,-14 -123,-29 -184,-45 -64,-16 -129,-33 -193,-51 -66,-18 -133,-38 -199,-58 -69,-21 -138,-43 -206,-66 -71,-24 -140,-49 -210,-75 -71,-28 -141,-56 -211,-87 -70,-31 -139,-64 -208,-99 -34,-18 -68,-37 -102,-56 -33,-19 -67,-38 -100,-59 -32,-20 -65,-41 -97,-63 -31,-21 -62,-44 -93,-67 -30,-24 -60,-48 -89,-73 -29,-24 -57,-50 -84,-77 -27,-26 -53,-54 -78,-82 -25,-29 -49,-58 -72,-88 -23,-31 -44,-62 -64,-94 -21,-33 -39,-66 -56,-101 -24,-48 -57,-84 -74,-135 -13,-39 -28,-63 -37,-103 -9,-42 -42,-135 -47,-177"/>
                            </g>

                            <!-- FORRO (interior, mismo color que capellada) -->
                            <g id="forro">
                                <path class="fil0 str4" d="M15818 12124c-287,387 -463,649 -928,835 -407,164 -796,180 -1213,38 -198,-67 -383,-159 -568,-258 -185,-99 -367,-199 -540,-321 -214,-152 -287,-241 -484,-414 -163,-144 -325,-252 -540,-295 -428,-87 -833,140 -1176,325 -367,199 -729,410 -1090,621 -723,423 -1444,849 -2164,1278 46,132 182,301 301,367 121,67 331,75 458,80 881,-39 1761,-78 2642,-117 -419,604 -838,1207 -1256,1810 503,6 1007,8 1511,-15 251,-11 503,-27 754,-41 252,-13 504,-23 755,-29 252,-6 504,-13 755,-24 252,-11 504,-12 756,-3 631,21 878,46 1510,40 -302,-657 -603,-1314 -905,-1971 326,-136 721,-311 1001,-552 150,-130 271,-271 361,-456 78,-162 115,-405 149,-577 -30,-107 -59,-214 -89,-321z"/>
                            </g>

                            <!-- CAPELLADA TRASERA -->
                            <g id="capellada-trasera">
                                <path class="fil1 str1" d="M13848 13772c376,768 740,1511 1092,2228 309,6 554,-13 735,-57 325,-58 526,-140 601,-244 54,-848 8,-1624 -136,-2328 -426,4 -817,11 -1175,20 -214,104 -587,230 -1117,381z"/>
                            </g>

                            <!-- ALETA (detalle) -->
                            <g id="aleta">
                                <path class="fil1 str1" d="M15818 12124c47,171 71,256 71,256 -41,40 -62,59 -62,59 -62,121 -93,181 -93,181 -49,-181 -73,-273 -73,-274 105,-148 157,-222 157,-222z"/>
                                <path class="fil1 str1" d="M16263 12017c-37,413 -78,865 -123,1354 -361,6 -752,13 -1175,20 158,-101 295,-196 410,-285 121,-88 211,-197 270,-325 122,-228 182,-342 182,-342 170,-164 315,-305 436,-422z"/>
                            </g>

                            <!-- LOGO ACHE -->
                            <g id="logo-ache">
                                <path class="fil4 str1" fill="black" d="M10311 12084c-433,239 -817,459 -1154,659 -252,352 -383,803 -394,1352 287,-16 519,-29 699,-40 -21,-601 157,-1019 533,-1252 45,508 82,929 112,1264 -283,669 -565,1337 -847,2006 654,8 1203,5 1647,-10 -26,-241 -76,-779 -148,-1611 220,-12 396,-19 527,-22 39,973 59,1460 59,1460 -149,11 -300,21 -453,32 12,94 18,141 18,141 202,-6 303,-9 303,-9 475,-17 978,-45 1510,-84 203,-148 362,-313 477,-496 206,-322 320,-689 344,-1104 26,-484 -37,-881 -189,-1190 -79,-167 -194,-323 -343,-469 -316,-171 -675,-440 -1079,-808 -6,252 -10,476 -12,673 388,229 665,519 830,870 102,258 146,517 132,776 -110,655 -392,1087 -847,1296 -74,-1897 -111,-2845 -111,-2845 11,-392 8,-653 -9,-782 -201,-144 -431,-202 -691,-172 7,464 36,1125 86,1984 -356,13 -533,20 -533,20 -57,-866 -85,-1298 -85,-1298 357,-7 535,-10 535,-10 -1,-440 -9,-671 -25,-693 -240,36 -537,157 -892,362z"/>
                            </g>

                            <!-- INTERIOR (parte interna del zapato) -->
                            <g id="interior">
                                <path class="fil1 str1" d="M7097 13524c-69,224 31,479 301,765 1296,-740 2493,-1437 3593,-2092 115,-71 189,-129 223,-174 187,-27 304,-129 352,-305 188,53 375,161 560,324 257,230 496,413 716,550 294,180 598,321 912,422 223,70 441,92 654,67 334,-51 602,-152 804,-302 267,-193 468,-425 602,-695 68,-170 32,-307 -107,-410 -101,-36 -216,-12 -346,71 -299,243 -601,398 -907,463 -313,64 -647,69 -1002,15 -235,-38 -437,-126 -605,-265 -145,-117 -286,-247 -425,-390 -161,-170 -342,-311 -542,-423 -116,-64 -206,-112 -270,-144 -73,-224 -172,-432 -296,-625 -70,-105 -156,-153 -258,-144 8,10 11,16 11,16 -125,121 -275,267 -452,438 -382,371 -915,888 -1599,1552 -554,371 -1194,800 -1919,1286z"/>
                                <path class="fil2 str1" d="M11566 11718c-235,-69 -553,-3 -955,196 -1061,595 -2182,1242 -3361,1940 -8,-43 -16,-86 -25,-129 1190,-700 2281,-1333 3273,-1899 423,-236 768,-335 1036,-295 183,20 413,146 688,379 258,238 562,454 910,647 650,332 1159,424 1528,277 299,-74 529,-342 689,-806"/>
                                <path class="fil2 str1" d="M11343 11692c-40,170 -88,287 -143,350"/>
                                <path class="fil2 str1" d="M11383 11523c72,-281 77,-528 16,-741 -140,-253 -251,-431 -332,-534"/>
                                <path class="fil2 str1" d="M11601 11543c29,-222 32,-403 9,-542"/>
                            </g>

                            <!-- CAPELLADA PRINCIPAL -->
                            <g id="capellada">
                                <path class="fil1 str1" d="M11384 13874c-478,640 -1011,1372 -1599,2197 -524,2 -1061,-5 -1610,-21 -585,-17 -1160,-135 -1728,-352 -666,-262 -1352,-488 -1775,-1092 -85,-213 -19,-474 223,-652 232,-117 485,-188 814,-201 742,-34 1291,-165 1646,-394 -76,407 48,627 372,661 1155,-31 2374,-79 3657,-146z"/>
                            </g>

                            <!-- CORDONES (independientes) -->
                            <g id="cordones">
                                <path class="fil0 str4" d="M9921 11083c-15,-106 65,-190 146,-229 33,-16 65,-22 101,-20 34,2 65,8 97,19 65,22 113,62 161,110 30,30 58,62 88,93 39,41 82,78 127,112 172,130 231,151 392,299 70,65 130,135 182,216 39,62 77,123 109,189 21,43 36,91 21,141 -9,32 -28,40 -55,45 -44,10 -84,3 -127,-5 -47,-9 -92,-27 -137,-43 -26,-9 -51,-14 -78,-16 -27,-1 -53,-3 -78,-16 -31,-15 -58,-37 -86,-57 -62,-43 -121,-90 -180,-137 -130,-100 -262,-199 -385,-310 -88,-80 -276,-243 -298,-391z"/>
                                <path class="fil0 str4" d="M9278 11720c-13,-83 51,-150 114,-180 55,-27 102,-20 156,-1 51,17 89,49 126,86 24,24 46,49 70,73 31,33 64,62 100,89 135,102 182,119 308,235 55,51 102,106 143,170 31,48 60,97 86,149 18,36 29,68 17,111 -8,24 -23,30 -44,35 -67,14 -149,-17 -207,-38 -20,-7 -41,-11 -62,-12 -21,-2 -41,-3 -61,-13 -24,-12 -46,-29 -68,-45 -48,-33 -95,-71 -142,-107 -102,-80 -205,-157 -302,-245 -69,-63 -217,-191 -234,-307z"/>
                                <path class="fil0 str4" d="M8682 12348c13,-56 57,-98 99,-126 35,-23 68,-41 112,-39 126,3 139,111 194,188 27,38 61,68 93,101 35,36 68,73 97,114 31,44 55,89 70,142 12,43 20,86 27,131 4,34 3,63 -12,95 -9,17 -18,30 -37,38 -38,15 -95,3 -131,-11 -16,-6 -33,-15 -50,-21 -19,-7 -39,-5 -58,-9 -19,-3 -31,-16 -45,-29 -27,-27 -53,-55 -78,-85 -62,-73 -127,-143 -182,-223 -44,-63 -120,-171 -99,-266z"/>
                                <path class="fil0 str4" d="M8083 12894c31,-85 136,-167 209,-199 41,-19 101,-28 145,-5 43,23 60,77 78,116 20,42 49,74 81,104 40,37 80,73 113,118 72,96 78,169 82,284 1,55 -13,118 -59,153 -34,26 -81,30 -120,28 -44,-2 -83,-24 -128,-21 -22,2 -42,8 -64,-8 -25,-19 -46,-41 -67,-64 -66,-74 -135,-144 -192,-227 -50,-73 -115,-175 -78,-279z"/>
                                <path class="fil0 str4" d="M7554 13091c64,-54 184,-71 260,-68 47,2 102,17 135,58 29,36 21,87 17,126 -4,44 2,83 15,125 17,51 35,101 43,156 18,116 -13,178 -64,273 -26,48 -66,90 -120,100 -43,9 -75,-7 -111,-26 -20,-10 -37,-24 -53,-39 -16,-14 -29,-30 -48,-40 -20,-10 -43,-11 -56,-35 -15,-25 -21,-52 -28,-80 -22,-89 -48,-190 -57,-283 -9,-89 -14,-199 67,-267z"/>
                            </g>

                            <!-- HILOS / COSTURAS DECORATIVAS -->
                            <g id="hilos">
                                <path class="fil3 str3" d="M12661 15885c38,-32 76,-64 113,-97 37,-33 73,-66 109,-100 29,-28 58,-57 86,-87 24,-25 47,-51 70,-78 25,-31 49,-62 72,-94 16,-22 31,-44 45,-67 15,-23 29,-48 42,-72 13,-22 24,-45 35,-67 11,-21 21,-42 30,-63 9,-19 17,-39 25,-58 7,-19 15,-37 22,-55 6,-17 12,-33 18,-50 10,-28 19,-55 27,-83 8,-25 16,-50 22,-75 6,-22 12,-43 17,-65 4,-19 8,-38 12,-56 4,-16 7,-32 10,-49 3,-17 6,-35 9,-52 2,-10 4,-19 5,-29 3,-18 6,-37 9,-56 1,-9 2,-19 3,-28 2,-10 3,-20 4,-29 2,-20 4,-39 5,-59 1,-20 2,-40 3,-59 0,-21 1,-41 1,-61 0,-26 0,-52 0,-79 0,-30 1,-61 1,-92 0,-26 1,-53 1,-80 -1,-24 -1,-49 -1,-74 -1,-22 -2,-45 -3,-68 -1,-21 -3,-41 -4,-61 -2,-18 -4,-35 -5,-53 -2,-16 -4,-31 -7,-47 -2,-16 -4,-32 -7,-47 -2,-13 -5,-25 -8,-37 -4,-20 -9,-40 -14,-60 -6,-23 -12,-46 -19,-69 -5,-20 -11,-39 -16,-58 -7,-21 -13,-42 -20,-63 -8,-23 -15,-46 -23,-68 -7,-19 -14,-38 -22,-57 -6,-15 -12,-30 -18,-44 -9,-21 -17,-41 -26,-60 -5,-10 -10,-20 -14,-30 -5,-9 -10,-19 -15,-28 -6,-12 -12,-23 -18,-34 -3,-5 -6,-10 -9,-15 -3,-5 -6,-10 -10,-15 -4,-5 -8,-11 -12,-17 -5,-8 -11,-15 -17,-23 -8,-10 -17,-20 -25,-30 -12,-15 -25,-30 -37,-44 -18,-21 -35,-41 -53,-62 -11,-13 -22,-25 -33,-38 -26,-30 -52,-59 -79,-89 -34,-20 -69,-39 -104,-59 -20,-12 -40,-24 -60,-36 -17,-9 -33,-19 -49,-29 -16,-10 -32,-19 -47,-29 -34,-21 -67,-43 -100,-65 -20,-14 -40,-28 -60,-42 -18,-13 -37,-26 -55,-40 -17,-13 -34,-26 -51,-39 -16,-12 -32,-25 -47,-37 -28,-22 -55,-45 -82,-68 -12,-11 -24,-21 -37,-32 -11,-11 -23,-21 -35,-32 -21,-19 -43,-38 -64,-58 -19,-17 -38,-35 -58,-53 -24,-21 -48,-43 -72,-64 -21,-18 -41,-35 -62,-51 -13,-10 -25,-20 -38,-30 -22,-16 -45,-32 -67,-47 -23,-15 -47,-29 -70,-42 -24,-13 -47,-25 -71,-36 -12,-6 -25,-11 -37,-16 -12,-5 -25,-9 -38,-14 -12,-4 -25,-8 -38,-12 -12,-4 -24,-7 -36,-10 -11,-3 -22,-6 -34,-8 -10,-3 -20,-5 -31,-7 -10,-1 -20,-3 -30,-4 -11,-2 -22,-3 -32,-4 -11,-1 -22,-2 -34,-2 -11,-1 -22,-1 -33,-1 -11,-1 -22,-1 -33,0 -12,0 -24,0 -35,1 -13,1 -26,2 -39,4 -16,1 -31,3 -46,6 -17,2 -34,5 -52,9 -19,4 -39,8 -58,13 -21,5 -42,10 -63,17 -11,3 -21,6 -32,9 -11,3 -22,7 -33,10 -21,7 -42,14 -64,22 -21,8 -42,16 -63,24 -21,9 -42,18 -63,27 -21,10 -43,20 -64,30 -32,15 -64,30 -96,46 -34,17 -68,35 -102,53 -29,15 -57,30 -86,45 -32,17 -63,34 -94,51 -71,38 -142,77 -212,117 -42,23 -83,46 -125,70 -51,29 -102,58 -153,87 -73,42 -146,84 -218,126 -58,33 -116,67 -174,101 -82,48 -165,96 -247,144 -28,40 -53,82 -78,125 -27,47 -52,96 -75,146 -23,49 -44,99 -63,150 -19,50 -37,101 -53,153 -16,51 -30,103 -43,156 -6,26 -12,53 -17,80 -5,27 -10,55 -15,82 -4,29 -8,58 -12,87 -4,31 -7,61 -9,92 -3,36 -5,73 -7,110 176,-10 351,-20 526,-30 1,-27 1,-54 2,-81 1,-22 2,-44 4,-66 1,-19 3,-38 5,-56 1,-17 3,-33 5,-49 2,-15 4,-29 6,-43 3,-25 7,-49 11,-73 3,-18 6,-35 10,-52 3,-18 7,-37 11,-55 7,-32 14,-64 23,-96 4,-14 9,-29 13,-43 5,-14 9,-28 14,-42 10,-26 21,-53 32,-79 6,-13 12,-26 18,-38 6,-13 12,-26 18,-38 7,-13 13,-25 20,-38 6,-12 13,-25 20,-37 7,-12 14,-24 21,-35 4,-7 9,-13 13,-20 9,-14 19,-28 29,-41 12,-15 24,-31 37,-45 17,-19 35,-37 54,-54 11,-10 23,-21 36,-31 14,-12 29,-24 44,-36 19,-15 38,-29 57,-43 23,-17 47,-34 71,-51 41,-29 82,-57 124,-86 4,52 9,104 13,156 33,370 66,739 98,1109"/>
                                <path class="fil3 str3" d="M9588 15871c413,-567 826,-1135 1239,-1702 -83,3 -165,6 -248,10 -63,3 -126,6 -190,9 -60,2 -120,5 -180,8 -69,3 -137,6 -205,10 -50,2 -100,5 -150,8 -44,2 -88,5 -131,7 -61,3 -121,7 -181,11 -98,6 -196,12 -295,18 -32,1 -64,3 -97,5 -41,2 -82,5 -124,7 -39,2 -78,3 -117,5 -40,2 -80,3 -120,5 -36,1 -72,3 -109,4 -43,1 -86,3 -129,4 -18,1 -35,1 -52,2 -24,1 -48,2 -71,3 -28,1 -56,2 -84,3 -37,2 -75,3 -112,5 -34,1 -67,3 -101,4 -46,2 -92,4 -137,5 -23,0 -45,1 -67,1 -23,0 -46,0 -69,-1 -23,0 -47,-1 -71,-2 -24,-2 -48,-3 -73,-6 -25,-3 -50,-6 -75,-10 -26,-5 -52,-10 -77,-17 -24,-6 -48,-13 -71,-22 -19,-7 -38,-14 -56,-23 -27,-13 -54,-27 -80,-44 -14,-9 -27,-19 -41,-29 -26,-21 -50,-43 -72,-68 -12,-13 -22,-26 -33,-39 -10,-14 -20,-28 -29,-43 -9,-14 -18,-29 -26,-44 -8,-16 -15,-32 -22,-49 -8,-18 -14,-37 -20,-56 -8,-25 -14,-50 -19,-75 -7,-31 -11,-64 -13,-96 -3,-41 -3,-81 0,-122"/>
                                <path class="fil3 str3" d="M7147 14020c-32,14 -64,27 -97,42 -34,15 -68,31 -102,47 -36,17 -72,34 -108,53 -37,18 -74,38 -111,58 -78,41 -155,85 -231,130 -80,48 -158,98 -235,150 -79,53 -156,109 -231,167 -37,29 -74,59 -111,89 -36,31 -72,62 -107,93 -35,32 -69,64 -103,97 -33,32 -65,66 -96,100 -31,33 -61,67 -90,102 -28,34 -56,69 -82,105"/>
                                <polygon class="fil3 str3" points="10662,14346 11371,14312 11438,15962 10810,16005 "/>
                                <polygon class="fil3 str3" points="11330,12303 11405,13777 10695,13803 10598,12316 "/>
                                <path class="fil3 str3" d="M11970 12480c40,28 79,56 118,84 31,22 62,45 93,67 24,18 48,36 72,55 19,15 38,29 57,45 15,12 30,24 46,37 12,11 25,21 37,32 20,18 40,36 59,54 16,15 32,31 47,46 16,16 32,33 47,49 11,13 23,26 34,39 10,13 20,25 30,38 14,17 27,34 40,52 16,22 32,45 47,68 15,22 29,45 42,67 7,11 13,22 20,33 6,11 13,23 19,34 12,22 24,46 35,69 12,24 22,48 32,73 6,13 11,26 15,39 5,13 10,26 15,40 8,25 16,51 24,77 8,30 16,61 23,92 5,20 9,41 13,61 7,33 13,66 18,99 2,16 5,32 7,48 2,16 4,32 5,48 3,25 5,50 7,75 2,28 4,55 5,83 0,18 1,36 1,53 0,23 0,45 -1,67 -1,20 -3,40 -5,61 -2,9 -3,19 -4,29 -2,10 -3,20 -5,29 -3,19 -7,38 -11,57 -5,19 -9,37 -14,56 -4,18 -10,37 -15,56 -2,9 -5,18 -8,28 -3,9 -5,19 -8,28 -6,20 -13,40 -20,60 -7,22 -15,44 -23,65 -4,11 -9,23 -13,34 -5,12 -10,24 -15,36 -11,25 -22,50 -33,75 -6,12 -12,25 -19,38 -6,13 -12,26 -19,39 -11,21 -22,41 -34,62 -13,25 -27,49 -42,73 -10,17 -20,34 -31,51 -14,22 -29,44 -44,65 -15,21 -30,42 -47,62 -16,20 -33,40 -51,59 -19,20 -38,39 -57,58 -20,19 -41,39 -63,57 -16,15 -33,28 -49,42 -11,9 -22,18 -33,26 -13,10 -26,19 -38,28 -16,11 -32,21 -48,31 -21,13 -42,25 -64,36 -14,7 -28,14 -42,20 -17,8 -35,16 -52,24 -39,17 -78,34 -117,51 -43,-1087 -85,-2174 -128,-3261 49,34 97,67 145,101z"/>
                            </g>
                        </svg>
                    </div>
                </div>

                <!-- BARRA DE HERRAMIENTAS (rotar, zoom, AR) -->
                <div class="absolute bottom-8 left-1/2 flex -translate-x-1/2 items-center gap-6 rounded-full border border-gray-100 bg-white/50 px-6 py-3 shadow-xl backdrop-blur-lg dark:border-white/5 dark:bg-white/5">
                    <button id="rotateBtn" aria-label="Rotar 360°" class="flex flex-col items-center gap-1 text-[10px] font-bold uppercase tracking-tighter text-gray-400 hover:text-black transition-colors">
                        <span class="material-symbols-outlined">rotate_right</span>
                        <span id="rotateLabel">360°</span>
                    </button>
                    <div class="h-6 w-px bg-gray-200 dark:bg-white/10"></div>
                    <button aria-label="Zoom detalles" class="flex flex-col items-center gap-1 text-[10px] font-bold uppercase tracking-tighter text-gray-400 hover:text-black transition-colors">
                        <span class="material-symbols-outlined">zoom_in</span>
                        Detalles
                    </button>
                    <div class="h-6 w-px bg-gray-200 dark:bg-white/10"></div>
                    <button aria-label="Vista aumentada" class="flex flex-col items-center gap-1 text-[10px] font-bold uppercase tracking-tighter text-gray-400 hover:text-black transition-colors">
                        <span class="material-symbols-outlined">view_in_ar</span>
                        AR
                    </button>
                </div>
            </div>

            <!-- === PANEL DE PERSONALIZACIÓN === -->
            <aside class="flex w-full flex-col border-l border-gray-100 bg-white dark:border-white/5 dark:bg-background-dark lg:w-[420px]">
                <div class="flex h-full flex-col">
                    <!-- Cabecera panel -->
                    <div class="p-8 pb-4">
                        <h1 class="text-2xl font-light tracking-tight dark:text-white">PERSONALIZAR ACHEFOOTWEAR</h1>
                        <p class="mt-1 text-xs font-medium uppercase tracking-[0.1em] text-gray-400">Hecho a mano con materiales premium</p>
                    </div>

                    <!-- Opciones de personalización (scroll interno) -->
                    <div class="flex-1 overflow-y-auto px-8 py-4 custom-scrollbar">
                        <!-- 01 – COMPONENTE ACTIVO -->
                        <div class="mb-10">
                            <span class="text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400">01 — Seleccionar Componente</span>
                            <div class="mt-4 grid grid-cols-2 gap-2" id="partSelector">
                                <button data-part="upper" class="part-btn active-part flex items-center gap-3 rounded-lg border p-3 text-left transition-all">
                                    <span class="material-symbols-outlined text-black">texture</span>
                                    <span class="text-xs font-bold uppercase tracking-wide">Parte Superior</span>
                                </button>
                                <button data-part="midsole" class="part-btn flex items-center gap-3 rounded-lg border border-gray-100 p-3 text-left hover:border-gray-200 dark:border-white/5 transition-all">
                                    <span class="material-symbols-outlined text-gray-400">radio_button_unchecked</span>
                                    <span class="text-xs font-bold uppercase tracking-wide text-gray-500">Entresuela</span>
                                </button>
                                <button data-part="sole" class="part-btn flex items-center gap-3 rounded-lg border border-gray-100 p-3 text-left hover:border-gray-200 dark:border-white/5 transition-all">
                                    <span class="material-symbols-outlined text-gray-400">grid_view</span>
                                    <span class="text-xs font-bold uppercase tracking-wide text-gray-500">Suela</span>
                                </button>
                                <button data-part="laces" class="part-btn flex items-center gap-3 rounded-lg border border-gray-100 p-3 text-left hover:border-gray-200 dark:border-white/5 transition-all">
                                    <span class="material-symbols-outlined text-gray-400">horizontal_rule</span>
                                    <span class="text-xs font-bold uppercase tracking-wide text-gray-500">Cordones</span>
                                </button>
                            </div>
                        </div>

                        <!-- 02 – COLORES -->
                        <div class="mb-10">
                            <span class="text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400">02 — Material y Color</span>
                            <div class="mt-4 flex flex-wrap gap-4" id="colorSelector">
                                <button class="color-option active relative flex h-12 w-12 items-center justify-center rounded-full border-2 border-black ring-4 ring-black/10" data-color="#ffffff" data-color-name="Blanco">
                                    <span class="h-8 w-8 rounded-full bg-white shadow-inner"></span>
                                    <span class="absolute -bottom-6 opacity-0 group-hover:opacity-100 transition-opacity text-[8px] uppercase tracking-widest font-bold">Blanco</span>
                                </button>
                                <button class="color-option relative flex h-12 w-12 items-center justify-center rounded-full border border-gray-100 hover:border-gray-300 dark:border-white/10 transition-all" data-color="#f3eae7" data-color-name="Arena">
                                    <span class="h-8 w-8 rounded-full bg-[#f3eae7] shadow-inner"></span>
                                    <span class="absolute -bottom-6 opacity-0 group-hover:opacity-100 transition-opacity text-[8px] uppercase tracking-widest font-bold">Arena</span>
                                </button>
                                <button class="color-option relative flex h-12 w-12 items-center justify-center rounded-full border border-gray-100 hover:border-gray-300 dark:border-white/10 transition-all" data-color="#3d3d3d" data-color-name="Obsidiana">
                                    <span class="h-8 w-8 rounded-full bg-[#3d3d3d] shadow-inner"></span>
                                    <span class="absolute -bottom-6 opacity-0 group-hover:opacity-100 transition-opacity text-[8px] uppercase tracking-widest font-bold">Obsidiana</span>
                                </button>
                                <button class="color-option relative flex h-12 w-12 items-center justify-center rounded-full border border-gray-100 hover:border-gray-300 dark:border-white/10 transition-all" data-color="#9a5f4c" data-color-name="Arcilla">
                                    <span class="h-8 w-8 rounded-full bg-[#9a5f4c] shadow-inner"></span>
                                    <span class="absolute -bottom-6 opacity-0 group-hover:opacity-100 transition-opacity text-[8px] uppercase tracking-widest font-bold">Arcilla</span>
                                </button>
                            </div>
                        </div>

                        <!-- 03 – ACABADOS (mockup, no funcional) -->
                        <div class="mb-10">
                            <span class="text-[10px] font-bold uppercase tracking-[0.2em] text-gray-400">03 — Acabado de Cuero</span>
                            <div class="mt-4 space-y-3">
                                <div class="flex items-center justify-between rounded-xl border border-gray-100 p-4 dark:border-white/5">
                                    <div>
                                        <p class="text-xs font-bold uppercase tracking-tight">Nappa de Grano Completo</p>
                                        <p class="text-[10px] text-gray-400">Acabado suave y mate</p>
                                    </div>
                                    <div class="h-4 w-4 rounded-full border-4 border-black"></div>
                                </div>
                                <div class="flex items-center justify-between rounded-xl border border-gray-50 p-4 opacity-50 dark:border-white/5">
                                    <div>
                                        <p class="text-xs font-bold uppercase tracking-tight">Gamuza Perforada</p>
                                        <p class="text-[10px] text-gray-400">Textura transpirable</p>
                                    </div>
                                    <div class="h-4 w-4 rounded-full border border-gray-300"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FOOTER: PRECIO Y CARRITO -->
                    <div class="border-t border-gray-100 p-8 dark:border-white/5">
                        <div class="mb-6 flex items-end justify-between">
                            <div>
                                <p class="text-[10px] font-bold uppercase tracking-widest text-gray-400">Precio Total</p>
                                <p class="text-3xl font-light tracking-tighter dark:text-white">180.000</p>
                            </div>
                            <div class="text-right">
                                <p class="text-[10px] font-bold uppercase tracking-widest text-gray-400">Envío</p>
                                <p class="text-xs font-medium dark:text-gray-300">Gratuito</p>
                            </div>
                        </div>
                        <button class="w-full rounded-lg bg-black py-4 text-xs font-extrabold uppercase tracking-[0.2em] text-white shadow-lg shadow-black/20 transition-all hover:scale-[1.02] active:scale-[0.98]">
                            Añadir al Carrito
                        </button>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <!-- Fondo decorativo -->
    <div class="pointer-events-none fixed -bottom-24 -left-24 -z-10 select-none opacity-[0.02]">
        <h1 class="text-[20vw] font-black uppercase leading-none tracking-tighter">ACHE</h1>
    </div>

    <!-- ========== SCRIPT OPTIMIZADO ========== -->
    <script>
        (function() {
            "use strict";

            // --- CONSTANTES Y ESTADO ---
            const STATE = {
                activePart: 'upper',     // upper, midsole, sole, laces
                colors: {
                    upper: '#ffffff',
                    sole: '#ffffff',
                    laces: '#ffffff'
                    // midsole no implementado
                }
            };

            // Mapa de funciones de actualización por parte
            const UPDATERS = {
                upper: updateUpperColor,
                sole: updateSoleColor,
                laces: updateLacesColor,
                midsole: () => {} // placeholder
            };

            // Paleta de ajuste de trazos para colores personalizados
            const STROKE_MAP = {
                '#ffffff': { str: '#000000', str0: '#2B2B2A', str4: '#2B2B2A' },
                '#f3eae7': { str: '#d4c9c5', str0: '#b3a7a2', str4: '#b3a7a2' },
                '#3d3d3d': { str: '#1a1a1a', str0: '#2d2d2d', str4: '#2d2d2d' },
                '#9a5f4c': { str: '#7a4c3c', str0: '#8a5a4a', str4: '#8a5a4a' }
            };

            // --- CACHÉ DE SELECTORES ---
            const $ = selector => document.querySelectorAll(selector);
            const $id = id => document.getElementById(id);

            // Elementos SVG importantes (cacheados)
            let svgCache = {
                upper: {
                    groups: ['#capellada', '#capellada-trasera', '#aleta', '#forro', '#interior'],
                    fillSelector: '.fil1',
                    strokeSelector: '.str1'
                },
                sole: {
                    groups: ['#suela', '#suela'],  // el grupo suela ya contiene todos los paths
                    fillSelector: '.fil0, .fil1',   // algunos paths de suela tienen fil1
                    strokeSelector: '.str0, .str1'
                },
                laces: {
                    groups: ['#cordones'],
                    fillSelector: '.fil0',
                    strokeSelector: '.str4'
                }
            };

            // --- FUNCIONES DE ACTUALIZACIÓN DE COLOR (SIN EFECTOS GLOBALES) ---
            function updateUpperColor(color) {
                const stroke = STROKE_MAP[color]?.str || (color === '#ffffff' ? '#000000' : '#333');
                // Relleno de los grupos específicos
                svgCache.upper.groups.forEach(groupId => {
                    const group = document.querySelector(groupId);
                    if (!group) return;
                    group.querySelectorAll(svgCache.upper.fillSelector).forEach(el => el.style.fill = color);
                    group.querySelectorAll(svgCache.upper.strokeSelector).forEach(el => el.style.stroke = stroke);
                });
                STATE.colors.upper = color;
            }

            function updateSoleColor(color) {
                const stroke0 = STROKE_MAP[color]?.str0 || (color === '#ffffff' ? '#2B2B2A' : '#333');
                const stroke1 = STROKE_MAP[color]?.str || (color === '#ffffff' ? '#000000' : '#333');
                const soleGroup = document.querySelector('#suela');
                if (soleGroup) {
                    soleGroup.querySelectorAll('.fil0, .fil1').forEach(el => el.style.fill = color);
                    soleGroup.querySelectorAll('.str0').forEach(el => el.style.stroke = stroke0);
                    soleGroup.querySelectorAll('.str1').forEach(el => el.style.stroke = stroke1);
                }
                STATE.colors.sole = color;
            }

            function updateLacesColor(color) {
                const stroke = STROKE_MAP[color]?.str4 || (color === '#ffffff' ? '#2B2B2A' : '#333');
                const lacesGroup = document.querySelector('#cordones');
                if (lacesGroup) {
                    lacesGroup.querySelectorAll('.fil0').forEach(el => el.style.fill = color);
                    lacesGroup.querySelectorAll('.str4').forEach(el => el.style.stroke = stroke);
                }
                STATE.colors.laces = color;
            }

            // --- MANEJADOR DE SELECCIÓN DE PARTE ---
            function setActivePart(part) {
                STATE.activePart = part;
                // Actualizar clases de botones
                document.querySelectorAll('.part-btn').forEach(btn => {
                    const btnPart = btn.dataset.part;
                    if (btnPart === part) {
                        btn.classList.add('active-part', 'border-black');
                        btn.classList.remove('border-gray-100');
                        // Restaurar color de icono y texto
                        btn.querySelector('.material-symbols-outlined')?.classList.remove('text-gray-400');
                        btn.querySelector('.material-symbols-outlined')?.classList.add('text-black');
                        btn.querySelector('span:not(.material-symbols-outlined)')?.classList.remove('text-gray-500');
                        btn.querySelector('span:not(.material-symbols-outlined)')?.classList.add('text-black');
                    } else {
                        btn.classList.remove('active-part', 'border-black');
                        btn.classList.add('border-gray-100');
                        btn.querySelector('.material-symbols-outlined')?.classList.remove('text-black');
                        btn.querySelector('.material-symbols-outlined')?.classList.add('text-gray-400');
                        btn.querySelector('span:not(.material-symbols-outlined)')?.classList.remove('text-black');
                        btn.querySelector('span:not(.material-symbols-outlined)')?.classList.add('text-gray-500');
                    }
                });
            }

            // --- MANEJADOR DE SELECCIÓN DE COLOR ---
            function setActiveColor(button) {
                // Quitar clase activa de todos los colores
                document.querySelectorAll('.color-option').forEach(btn => {
                    btn.classList.remove('active', 'border-2', 'border-black', 'ring-4', 'ring-black/10');
                    btn.classList.add('border', 'border-gray-100');
                });
                // Activar el seleccionado
                button.classList.add('active', 'border-2', 'border-black', 'ring-4', 'ring-black/10');
                button.classList.remove('border', 'border-gray-100');

                const color = button.dataset.color;
                const part = STATE.activePart;
                if (UPDATERS[part]) {
                    UPDATERS[part](color);
                }
            }

            // --- INICIALIZACIÓN ---
            document.addEventListener('DOMContentLoaded', function() {
                // 1. Selección de parte (delegación)
                const partSelector = $id('partSelector');
                partSelector?.addEventListener('click', (e) => {
                    const btn = e.target.closest('.part-btn');
                    if (!btn) return;
                    e.preventDefault();
                    setActivePart(btn.dataset.part);
                });

                // 2. Selección de color (delegación)
                const colorSelector = $id('colorSelector');
                colorSelector?.addEventListener('click', (e) => {
                    const btn = e.target.closest('.color-option');
                    if (!btn) return;
                    e.preventDefault();
                    setActiveColor(btn);
                });

                // 3. Botón de rotación 360°
                const rotateBtn = $id('rotateBtn');
                const rotateLabel = $id('rotateLabel');
                let rotation = 0;
                rotateBtn?.addEventListener('click', () => {
                    rotation = (rotation + 90) % 360;
                    const container = $id('shoe-container');
                    if (container) {
                        container.style.transform = `rotate(${rotation}deg)`;
                    }
                    if (rotateLabel) {
                        rotateLabel.textContent = rotation === 0 ? '360°' : `${rotation}°`;
                    }
                });

                // 4. Colores por defecto (activo: upper, blanco)
                setActivePart('upper');
                const defaultColorBtn = document.querySelector('.color-option[data-color="#ffffff"]');
                if (defaultColorBtn) setActiveColor(defaultColorBtn);
            });
        })();
    </script>
</body>
</html>
